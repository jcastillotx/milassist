{
  "version": 2,
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "framework": "vite",
  "installCommand": "npm install && cd server && npm install",
  "rewrites": [
    {
      "source": "/api/:path*",
      "destination": "/api/server.js"
    }
  ],
  "env": {
    "NODE_ENV": "production",
    "DATABASE_URL": "$POSTGRES_URL",
    "JWT_SECRET": "$SUPABASE_JWT_SECRET",
    "SUPABASE_URL": "$SUPABASE_URL",
    "SUPABASE_SERVICE_ROLE_KEY": "$SUPABASE_SERVICE_ROLE_KEY",
    "STRIPE_SECRET_KEY": "$STRIPE_SECRET_KEY",
    "STRIPE_WEBHOOK_SECRET": "$STRIPE_WEBHOOK_SECRET",
    "S3_BUCKET_NAME": "$S3_BUCKET_NAME",
    "S3_REGION": "$S3_REGION",
    "S3_ACCESS_KEY_ID": "$S3_ACCESS_KEY_ID",
    "S3_SECRET_ACCESS_KEY": "$S3_SECRET_ACCESS_KEY",
    "ALLOWED_ORIGINS": "https://milassist.vercel.app,https://www.milassist.com",
    "FRONTEND_URL": "https://milassist.vercel.app",
    "APP_URL": "https://milassist.vercel.app"
  },
  "build": {
    "env": {
      "NODE_OPTIONS": "--no-deprecation",
      "VITE_API_URL": "/api",
      "VITE_ENABLE_PAYMENTS": "true",
      "VITE_ENABLE_DOCUMENTS": "true",
      "VITE_ENABLE_EMAIL_INTEGRATION": "true",
      "VITE_ENABLE_VIDEO_INTEGRATION": "true",
      "VITE_ENABLE_CALENDAR_INTEGRATION": "true",
      "VITE_ENABLE_TRAVEL": "true"
    }
  }
}
